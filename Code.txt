drop table STUDENT;
drop table STUD_SERVICE;
drop table SERVICE_REQUEST;
drop table UNDERGRADUATE;
drop table GRADUATE;
drop table MANAGER;
drop table DORM;
drop table SUPERVISOR;
drop table SUP_DORM;

create table MANAGER(
MAN_ID NUMBER(5),
MAN_FIRSTNAME VARCHAR2(8) NOT NULL,
MAN_LASTNAME VARCHAR2(8) NOT NULL,
MAN_LOCATION VARCHAR2(10),
MAN_ROOMNO NUMBER(3),
MAN_PHNO NUMBER(10),
CONSTRAINT MANAGER_MAN_ID_PK primary key(MAN_ID));

create table SUPERVISOR(
SUP_ID NUMBER(5),
SUP_FIRSTNAME VARCHAR(8) NOT NULL,
SUP_LASTNAME VARCHAR(8) NOT NULL,
SUP_PHNO NUMBER(10),
MAN_ID NUMBER(5),
CONSTRAINT SUPERVISOR_SUP_ID_PK primary key(SUP_ID),
CONSTRAINT SUPERVISOR_MAN_ID_FK foreign key(MAN_ID) references MANAGER(MAN_ID));

create table STUDENT(
STU_ID NUMBER(5),
STU_FIRSTNAME VARCHAR2(8) NOT NULL,
STU_LASTNAME VARCHAR2(8) NOT NULL,
STU_ADMIT VARCHAR(10),
STU_PHNO NUMBER(10),
STU_CATEGORY VARCHAR2(15),
STU_GENDER VARCHAR2(5),
SUP_ID NUMBER(5),
CONSTRAINT STUDENT_STU_ID_PK primary key(STU_ID),
CONSTRAINT STUDENT_SUP_ID_FK foreign key(SUP_ID) references SUPERVISOR(SUP_ID));

create table SERVICE_REQUEST(
SERVICE_ID NUMBER(5),
SERVICE_NAME VARCHAR2(20) NOT NULL,
CONSTRAINT SERVICE_REQUEST_SERVICE_ID_PK primary key(SERVICE_ID));

create table STUD_SERVICE(
STUDSERVICE_ID NUMBER(5),
SERVICE_ID NUMBER(5),
STU_ID NUMBER(5),
CONSTRAINT STUD_SERVICE_PK primary key(STUDSERVICE_ID, SERVICE_ID, STU_ID),
CONSTRAINT STUD_SERVICE_SERVICE_ID_FK foreign key(SERVICE_ID) references SERVICE_REQUEST(SERVICE_ID),
CONSTRAINT STUD_SERVICE_STU_ID_FK foreign key(STU_ID) references STUDENT(STU_ID));

create table DORM(
DORM_ROOMNO NUMBER(4),
DORM_LOCATION VARCHAR2(10),
DORM_NAME VARCHAR2(10),
DORM_TYPE VARCHAR2(15),
DORM_PRICE NUMBER(5),
CONSTRAINT DORM_DORM_ROOMNO_PK primary key(DORM_ROOMNO),
CONSTRAINT DORM_DORM_PRICE_CHK check(DORM_PRICE between 500 and 20000));

create table SUP_DORM(
SUPDORM_ID NUMBER(5),
SUP_ID NUMBER(5),
DORM_ROOMNO NUMBER(5),
CONSTRAINT SUP_DORM_PK primary key(SUPDORM_ID, SUP_ID, DORM_ROOMNO),
CONSTRAINT SUP_DORM_SUP_ID_FK foreign key(SUP_ID) references SUPERVISOR(SUP_ID),
CONSTRAINT SUP_DORM_DORM_ROOMNO_FK foreign key(DORM_ROOMNO) references DORM(DORM_ROOMNO));


create table UNDERGRADUATE(
STU_ID NUMBER(5),
UG_LABS VARCHAR2(15),
CONSTRAINT UNDERGRADUATE_STU_ID_PK primary key(STU_ID),
CONSTRAINT UNDERGRADUATE_STU_ID_FK foreign key(STU_ID) references STUDENT(STU_ID));

create table GRADUATE(
STU_ID NUMBER(5),
GRA_THESIS VARCHAR2(15),
CONSTRAINT GRADUATE_STU_ID_PK primary key(STU_ID),
CONSTRAINT GRADUATE_STU_ID_FK foreign key(STU_ID) references STUDENT(STU_ID));


 
